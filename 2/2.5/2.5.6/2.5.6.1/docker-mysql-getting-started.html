<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2.5.6.1 使用 Docker 部署 MySQL 服务器的基本步骤 | MySQL 8.0 中文参考手册</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon.ico">
    <script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8380975615223941" crossorigin="anonymous"></script>
    <meta name="description" content="对官方参考手册的翻译，持续翻译中">
    <meta name="keywords" content="mysql,sql,innodb">
    
    <link rel="preload" href="/assets/css/0.styles.aa2ad065.css" as="style"><link rel="preload" href="/assets/js/app.e47f27d9.js" as="script"><link rel="preload" href="/assets/js/2.47a142bd.js" as="script"><link rel="preload" href="/assets/js/14.182f7e04.js" as="script"><link rel="prefetch" href="/assets/js/10.deffa529.js"><link rel="prefetch" href="/assets/js/100.c67a8722.js"><link rel="prefetch" href="/assets/js/101.c3634f08.js"><link rel="prefetch" href="/assets/js/102.37559783.js"><link rel="prefetch" href="/assets/js/103.0f740477.js"><link rel="prefetch" href="/assets/js/104.ee30c467.js"><link rel="prefetch" href="/assets/js/105.ce774c27.js"><link rel="prefetch" href="/assets/js/106.7fc2af77.js"><link rel="prefetch" href="/assets/js/107.463506c5.js"><link rel="prefetch" href="/assets/js/108.dcbb7dfc.js"><link rel="prefetch" href="/assets/js/109.1748dba3.js"><link rel="prefetch" href="/assets/js/11.ed99e55c.js"><link rel="prefetch" href="/assets/js/110.05ceba3e.js"><link rel="prefetch" href="/assets/js/111.1e60f786.js"><link rel="prefetch" href="/assets/js/112.2aa6eb42.js"><link rel="prefetch" href="/assets/js/113.dd9afbf2.js"><link rel="prefetch" href="/assets/js/114.4ca23bb4.js"><link rel="prefetch" href="/assets/js/115.78eb1564.js"><link rel="prefetch" href="/assets/js/116.cbc996de.js"><link rel="prefetch" href="/assets/js/117.be839d0b.js"><link rel="prefetch" href="/assets/js/118.45d15684.js"><link rel="prefetch" href="/assets/js/119.7871ef4d.js"><link rel="prefetch" href="/assets/js/12.0db08d73.js"><link rel="prefetch" href="/assets/js/120.62529e4f.js"><link rel="prefetch" href="/assets/js/121.05361e30.js"><link rel="prefetch" href="/assets/js/122.afea5e3e.js"><link rel="prefetch" href="/assets/js/123.393ee2e4.js"><link rel="prefetch" href="/assets/js/124.a6ba6046.js"><link rel="prefetch" href="/assets/js/125.bc734137.js"><link rel="prefetch" href="/assets/js/126.69749199.js"><link rel="prefetch" href="/assets/js/127.a5467ca1.js"><link rel="prefetch" href="/assets/js/128.651d3c34.js"><link rel="prefetch" href="/assets/js/129.d8ae52e9.js"><link rel="prefetch" href="/assets/js/13.4741f569.js"><link rel="prefetch" href="/assets/js/130.75badf13.js"><link rel="prefetch" href="/assets/js/131.f12a1352.js"><link rel="prefetch" href="/assets/js/132.cd0f3206.js"><link rel="prefetch" href="/assets/js/133.a07a6baa.js"><link rel="prefetch" href="/assets/js/134.e8723244.js"><link rel="prefetch" href="/assets/js/135.3e7956a7.js"><link rel="prefetch" href="/assets/js/136.bc6faae5.js"><link rel="prefetch" href="/assets/js/137.518c8687.js"><link rel="prefetch" href="/assets/js/138.b66fb80f.js"><link rel="prefetch" href="/assets/js/139.9033e89e.js"><link rel="prefetch" href="/assets/js/140.48a183cb.js"><link rel="prefetch" href="/assets/js/141.076c03a3.js"><link rel="prefetch" href="/assets/js/142.15a4b15e.js"><link rel="prefetch" href="/assets/js/143.db514f87.js"><link rel="prefetch" href="/assets/js/144.72707222.js"><link rel="prefetch" href="/assets/js/145.e289b3d5.js"><link rel="prefetch" href="/assets/js/146.54fbefa1.js"><link rel="prefetch" href="/assets/js/147.2cc6048f.js"><link rel="prefetch" href="/assets/js/15.3865ed44.js"><link rel="prefetch" href="/assets/js/16.e4b67b78.js"><link rel="prefetch" href="/assets/js/17.7681fa5c.js"><link rel="prefetch" href="/assets/js/18.65f8210b.js"><link rel="prefetch" href="/assets/js/19.e67927c0.js"><link rel="prefetch" href="/assets/js/20.7f3f8669.js"><link rel="prefetch" href="/assets/js/21.db0160f6.js"><link rel="prefetch" href="/assets/js/22.c9938d92.js"><link rel="prefetch" href="/assets/js/23.0145e3cb.js"><link rel="prefetch" href="/assets/js/24.36e54bee.js"><link rel="prefetch" href="/assets/js/25.a7bbf870.js"><link rel="prefetch" href="/assets/js/26.601f8c7f.js"><link rel="prefetch" href="/assets/js/27.8c368242.js"><link rel="prefetch" href="/assets/js/28.73980f6a.js"><link rel="prefetch" href="/assets/js/29.d6db5bad.js"><link rel="prefetch" href="/assets/js/3.3bdb09ed.js"><link rel="prefetch" href="/assets/js/30.c1f26766.js"><link rel="prefetch" href="/assets/js/31.12841a99.js"><link rel="prefetch" href="/assets/js/32.125a41a6.js"><link rel="prefetch" href="/assets/js/33.968fcae4.js"><link rel="prefetch" href="/assets/js/34.40a92121.js"><link rel="prefetch" href="/assets/js/35.4bdb796f.js"><link rel="prefetch" href="/assets/js/36.76646ad0.js"><link rel="prefetch" href="/assets/js/37.2182e0c6.js"><link rel="prefetch" href="/assets/js/38.2abe4c4e.js"><link rel="prefetch" href="/assets/js/39.04d0c0a8.js"><link rel="prefetch" href="/assets/js/4.87a5081d.js"><link rel="prefetch" href="/assets/js/40.98039617.js"><link rel="prefetch" href="/assets/js/41.b35663a5.js"><link rel="prefetch" href="/assets/js/42.f04819f3.js"><link rel="prefetch" href="/assets/js/43.eb67f536.js"><link rel="prefetch" href="/assets/js/44.daff5acc.js"><link rel="prefetch" href="/assets/js/45.8cafa1c2.js"><link rel="prefetch" href="/assets/js/46.2b236515.js"><link rel="prefetch" href="/assets/js/47.45db49f5.js"><link rel="prefetch" href="/assets/js/48.d7b86fda.js"><link rel="prefetch" href="/assets/js/49.767ab145.js"><link rel="prefetch" href="/assets/js/5.966e3f4e.js"><link rel="prefetch" href="/assets/js/50.4469796e.js"><link rel="prefetch" href="/assets/js/51.926b10c8.js"><link rel="prefetch" href="/assets/js/52.1f804b89.js"><link rel="prefetch" href="/assets/js/53.7db8560c.js"><link rel="prefetch" href="/assets/js/54.cb854ae1.js"><link rel="prefetch" href="/assets/js/55.4cbee9d4.js"><link rel="prefetch" href="/assets/js/56.fc8313f5.js"><link rel="prefetch" href="/assets/js/57.76820eb2.js"><link rel="prefetch" href="/assets/js/58.4ca84f9d.js"><link rel="prefetch" href="/assets/js/59.3a2a2bcb.js"><link rel="prefetch" href="/assets/js/6.e63309a1.js"><link rel="prefetch" href="/assets/js/60.16f0b745.js"><link rel="prefetch" href="/assets/js/61.ffd8344d.js"><link rel="prefetch" href="/assets/js/62.35fb767b.js"><link rel="prefetch" href="/assets/js/63.a30f2ecc.js"><link rel="prefetch" href="/assets/js/64.1f19390b.js"><link rel="prefetch" href="/assets/js/65.d52206ca.js"><link rel="prefetch" href="/assets/js/66.e75a701d.js"><link rel="prefetch" href="/assets/js/67.c57cf858.js"><link rel="prefetch" href="/assets/js/68.2c732015.js"><link rel="prefetch" href="/assets/js/69.4d7be902.js"><link rel="prefetch" href="/assets/js/7.0290c42d.js"><link rel="prefetch" href="/assets/js/70.3bc7b3ce.js"><link rel="prefetch" href="/assets/js/71.f3eb4d98.js"><link rel="prefetch" href="/assets/js/72.5bdde9eb.js"><link rel="prefetch" href="/assets/js/73.2ce336c3.js"><link rel="prefetch" href="/assets/js/74.9580a068.js"><link rel="prefetch" href="/assets/js/75.b30ba930.js"><link rel="prefetch" href="/assets/js/76.83f3b8bb.js"><link rel="prefetch" href="/assets/js/77.e4b48f96.js"><link rel="prefetch" href="/assets/js/78.d5ee25d4.js"><link rel="prefetch" href="/assets/js/79.602ebc3f.js"><link rel="prefetch" href="/assets/js/8.f0b630de.js"><link rel="prefetch" href="/assets/js/80.f4fc83f8.js"><link rel="prefetch" href="/assets/js/81.81cdb8ef.js"><link rel="prefetch" href="/assets/js/82.417089c4.js"><link rel="prefetch" href="/assets/js/83.330d3269.js"><link rel="prefetch" href="/assets/js/84.c9bf1a9d.js"><link rel="prefetch" href="/assets/js/85.1cb5b3e7.js"><link rel="prefetch" href="/assets/js/86.b564fc45.js"><link rel="prefetch" href="/assets/js/87.73b334e7.js"><link rel="prefetch" href="/assets/js/88.fe7655d8.js"><link rel="prefetch" href="/assets/js/89.ec3ac391.js"><link rel="prefetch" href="/assets/js/9.29102432.js"><link rel="prefetch" href="/assets/js/90.d172b4a0.js"><link rel="prefetch" href="/assets/js/91.471d1de4.js"><link rel="prefetch" href="/assets/js/92.e7776e79.js"><link rel="prefetch" href="/assets/js/93.da2515d1.js"><link rel="prefetch" href="/assets/js/94.ec94c79a.js"><link rel="prefetch" href="/assets/js/95.c62319ef.js"><link rel="prefetch" href="/assets/js/96.c59ea3f5.js"><link rel="prefetch" href="/assets/js/97.01a0f2a7.js"><link rel="prefetch" href="/assets/js/98.c074e536.js"><link rel="prefetch" href="/assets/js/99.fe7354b8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.aa2ad065.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/favicon.ico" alt="MySQL 8.0 中文参考手册" class="logo"> <span class="site-name can-hide">MySQL 8.0 中文参考手册</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://www.bookhub.tech" target="_blank" rel="noopener noreferrer" class="nav-link external">
  BookHub 首页
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://docs.bookhub.tech" target="_blank" rel="noopener noreferrer" class="nav-link external">
  中文文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://pdf.bookhub.tech" target="_blank" rel="noopener noreferrer" class="nav-link external">
  计算机书库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/dev2007/mysql8-manual" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://www.bookhub.tech" target="_blank" rel="noopener noreferrer" class="nav-link external">
  BookHub 首页
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://docs.bookhub.tech" target="_blank" rel="noopener noreferrer" class="nav-link external">
  中文文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://pdf.bookhub.tech" target="_blank" rel="noopener noreferrer" class="nav-link external">
  计算机书库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/dev2007/mysql8-manual" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">MySQL 翻译说明</a></li><li><a href="/mysql.html" class="sidebar-link">前言和法律条款</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/1/introduction" class="sidebar-heading clickable"><span>基本信息</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/2/installing" class="sidebar-heading clickable open"><span>MySQL 的安装和升级</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/2/2.1/general-installation-issues" class="sidebar-heading clickable"><span>通用安装指南</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/2/2.2/binary-installation.html" class="sidebar-link">使用通用二进制文件在 Unix/Linux 上安装 MySQL</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/2/2.3/windows-installation" class="sidebar-heading clickable"><span>在 Microsoft Windows 上安装 MySQL</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/2/2.4/macos-installation" class="sidebar-heading clickable"><span>在 macOS 上安装 MySQL</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/2/2.5/linux-installation" class="sidebar-heading clickable open"><span>在 Linux 上安装 MySQL</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/2/2.5/2.5.1/linux-installation-yum-repo.html" class="sidebar-link">使用 MySQL Yum 存储库在 Linux 上安装 MySQL</a></li><li><a href="/2/2.5/2.5.2/linux-installation-apt-repo.html" class="sidebar-link">使用 MySQL APT 存储库在 Linux 上安装 MySQL</a></li><li><a href="/2/2.5/2.5.3/linux-installation-sles-repo.html" class="sidebar-link">使用 MySQL SLES 仓库在 Linux 上安装 MySQL</a></li><li><a href="/2/2.5/2.5.4/linux-installation-rpm.html" class="sidebar-link">使用 Oracle 的 RPM 包在 Linux 上安装 MySQL</a></li><li><a href="/2/2.5/2.5.5/linux-installation-debian.html" class="sidebar-link">使用 Oracle 的 Debian 软件包在 Linux上 安装 MySQL</a></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><a href="/2/2.5/2.5.6/linux-installation-docker" class="sidebar-heading clickable open"><span>使用 Docker 在 Linux 上部署 MySQL</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/2/2.5/2.5.6/2.5.6.1/docker-mysql-getting-started.html" aria-current="page" class="active sidebar-link">使用 Docker 部署 MySQL 服务器的基本步骤</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/2/2.5/2.5.6/2.5.6.1/docker-mysql-getting-started.html#下载-mysql-服务器-docker-镜像" class="sidebar-link">下载 MySQL 服务器 Docker 镜像</a></li><li class="sidebar-sub-header"><a href="/2/2.5/2.5.6/2.5.6.1/docker-mysql-getting-started.html#启动-mysql-服务器实例" class="sidebar-link">启动 MySQL 服务器实例</a></li><li class="sidebar-sub-header"><a href="/2/2.5/2.5.6/2.5.6.1/docker-mysql-getting-started.html#从容器内连接到-mysql-服务器" class="sidebar-link">从容器内连接到 MySQL 服务器</a></li><li class="sidebar-sub-header"><a href="/2/2.5/2.5.6/2.5.6.1/docker-mysql-getting-started.html#容器-shell-访问" class="sidebar-link">容器 Shell 访问</a></li><li class="sidebar-sub-header"><a href="/2/2.5/2.5.6/2.5.6.1/docker-mysql-getting-started.html#停止和删除-mysql-容器" class="sidebar-link">停止和删除 MySQL 容器</a></li><li class="sidebar-sub-header"><a href="/2/2.5/2.5.6/2.5.6.1/docker-mysql-getting-started.html#升级-mysql-服务器容器" class="sidebar-link">升级 MySQL 服务器容器</a></li><li class="sidebar-sub-header"><a href="/2/2.5/2.5.6/2.5.6.1/docker-mysql-getting-started.html#有关使用-docker-部署-mysql-服务器的更多主题" class="sidebar-link">有关使用 Docker 部署 MySQL 服务器的更多主题</a></li></ul></li><li><a href="/2/2.5/2.5.6/2.5.6.2/docker-mysql-more-topics.html" class="sidebar-link">关于使用 Docker 部署 MySQL 服务的更多主题</a></li></ul></section></li><li><a href="/2/2.5/2.5.7/linux-installation-native.html" class="sidebar-link">从本地软件仓库在 Linux 上安装 MySQL</a></li><li><a href="/2/2.5/2.5.8/linux-installation-juju.html" class="sidebar-link">在有 Juju 的 Linux 上安装 MySQL</a></li><li><a href="/2/2.5/2.5.9/using-systemd.html" class="sidebar-link">使用 systemd 管理 MySQL 服务器</a></li></ul></section></li><li><a href="/2/2.6/uln-installation.html" class="sidebar-link">使用不可破坏的 Linux 网络（ULN）安装 MySQL</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/2/2.7/solaris-installation" class="sidebar-heading clickable"><span>在 Solaris 上安装 MySQL</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/2/2.8/freebsd-installation.html" class="sidebar-link">在 FreeBSD 上安装 MySQL</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/2/2.9/source-installation" class="sidebar-heading clickable"><span>从源代码安装 MySQL</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/2/2.10/postinstallation" class="sidebar-heading clickable"><span>安装后设置和测试</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/2/2.11/upgrading" class="sidebar-heading clickable"><span>升级 MySQL</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/2/2.12/downgrading.html" class="sidebar-link">降级 MySQL</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/2/2.13/perl-support" class="sidebar-heading clickable"><span>Perl 安装说明</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/3/tutorial" class="sidebar-heading clickable"><span>教程</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_2-5-6-1-使用-docker-部署-mysql-服务器的基本步骤"><a href="#_2-5-6-1-使用-docker-部署-mysql-服务器的基本步骤" class="header-anchor">#</a> 2.5.6.1 使用 Docker 部署 MySQL 服务器的基本步骤</h1> <div class="custom-block warning"><p class="custom-block-title">警告</p> <p>MySQL 团队维护的 MySQL Docker 镜像是专门为 Linux 平台构建的。其他平台不受支持，用户在其上使用这些 MySQL Docker 镜像将自行承担风险。有关在非 Linux 操作系统上运行这些容器的一些已知限制，参阅<a href="/2/2.5/2.5.6/2.5.6.3/deploy-mysql-nonlinux-docker.html">此处的讨论</a>。</p></div> <ul><li><p><a href="/2/2.5/2.5.6/2.5.6.1/docker-mysql-getting-started.html#下载-MySQL-服务器-Docker-镜像">下载 MySQL 服务器 Docker 镜像</a></p></li> <li><p><a href="/2/2.5/2.5.6/2.5.6.1/docker-mysql-getting-started.html#启动-MySQL-服务器实例">启动 MySQL 服务器实例</a></p></li> <li><p><a href="/2/2.5/2.5.6/2.5.6.1/docker-mysql-getting-started.html#从容器内连接到-MySQL-服务器">从容器内连接到 MySQL 服务器</a></p></li> <li><p><a href="/2/2.5/2.5.6/2.5.6.1/docker-mysql-getting-started.html#容器-Shell-访问">容器 Shell 访问</a></p></li> <li><p><a href="/2/2.5/2.5.6/2.5.6.1/docker-mysql-getting-started.html#停止和删除-MySQL-容器">停止和删除 MySQL 容器</a></p></li> <li><p><a href="/2/2.5/2.5.6/2.5.6.1/docker-mysql-getting-started.html#升级-MySQL-服务器容器">升级 MySQL 服务器容器</a></p></li> <li><p><a href="/2/2.5/2.5.6/2.5.6.1/docker-mysql-getting-started.html#有关使用-Docker-部署-MySQL-服务器的更多主题">有关使用 Docker 部署 MySQL 服务器的更多主题</a></p></li></ul> <h2 id="下载-mysql-服务器-docker-镜像"><a href="#下载-mysql-服务器-docker-镜像" class="header-anchor">#</a> 下载 MySQL 服务器 Docker 镜像</h2> <div class="custom-block danger"><p class="custom-block-title">重要</p> <p>对于 MySQL 企业版用户：需要订阅才能使用MySQL企业版本的Docker映像。订阅采用自带许可证模式；有关详细信息，参阅<a href="https://www.mysql.com/buy-mysql/" target="_blank" rel="noopener noreferrer">如何购买 MySQL 产品和服务<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p></div> <p>在单独的步骤中下载服务器图像不是严格必要的；但是，在创建 Docker 容器之前执行此步骤可以确保本地镜像是最新的。要下载 MySQL 社区版镜像，请运行以下命令：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> pull mysql/mysql-server:tag
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>tag</strong> 是要提取的镜像版本的标签（例如，<code>5.6</code>、<code>5.7</code>、<code>8.0</code> 或 <code>latest</code>）。如果省略 <code>:tag</code>，则使用 <code>latest</code> 标签，并下载 MySQL 社区服务器最新 GA 版本的图像。参阅<a href="https://hub.docker.com/r/mysql/mysql-server/tags/" target="_blank" rel="noopener noreferrer">Docker Hub 中 mysql/mysql服务器页面<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>上可用版本的标签列表。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> pull container-registry.oracle.com/mysql/community-server:tag
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>要从 OCR 下载 MySQL 企业版镜像，你需要首先接受 OCR 上的许可协议，并使用 Docker 客户端登录到容器仓库：</p> <ul><li><p>访问 OCR：<a href="https://container-registry.oracle.com/" target="_blank" rel="noopener noreferrer">https://container-registry.oracle.com/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 选择MySQL。</p></li> <li><p>在 MySQL 仓库列表下，选择<code>企业服务器（enterprise-server）</code>。</p></li> <li><p>如果你尚未登录到OCR，请单击页面右侧的<code>登录</code>按钮，然后在提示时输入你的 Oracle 帐户凭据。</p></li> <li><p>按照页面右侧的说明接受许可协议。</p></li> <li><p>使用 <code>docker login</code> 命令登录 Docker 客户端的 OCR（<code>docker</code> 命令）：</p></li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># docker login container-registry.oracle.com </span>
Username: Oracle-Account-ID
Password: password
Login successful.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>使用以下命令从 OCR下 载 MySQL 企业版 Docker 镜像：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> pull  container-registry.oracle.com/mysql/enterprise-server:tag
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><em>tag</em> 有不同的选择，对应于 OCR 提供的不同版本的 MySQL Docker 镜像：</p> <ul><li><code>8.0</code>、<code>8.0.x</code>（<em>x</em> 是 8.0 系列中的最新版本号），<code>latest</code>：MySQL 8.0，最新 GA</li> <li><code>5.7</code>、<code>5.7.y</code>（<em>y</em> 是 5.7 系列中的最新版本号）：MySQL 5.7</li></ul> <p>要从<a href="https://support.oracle.com/" target="_blank" rel="noopener noreferrer">我的 Oracle 支持<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>网站下载 MySQL 企业版镜像，请访问该网站，登录你的 Oracle 帐户，并在登录页面后执行以下步骤：</p> <ul><li><p>选择<strong>补丁和更新</strong>选项卡。</p></li> <li><p>转到<strong>补丁搜索</strong>区域，然后在<strong>搜索</strong>选项卡上切换到**产品或系列（高级）**子选项卡。</p></li> <li><p>在<strong>产品</strong>字段中输入“MySQL Server”，在<strong>发布</strong>字段中输入所需的版本号。</p></li> <li><p>使用其他过滤器的下拉列表选择<strong>描述</strong>——<strong>包含</strong>，并在文本字段中输入“Docker”。</p></li></ul> <p>下图显示了 MySQL 服务器 8.0 的 MySQL 企业版镜像的搜索设置：</p> <p><img src="/assets/img/docker-search2.b9de74eb.png" alt="docker-search2"></p> <ul><li><p>单击<code>搜索</code>按钮，然后从结果列表中选择所需的版本，然后单击<code>下载</code>按钮。</p></li> <li><p>在出现的<strong>文件下载</strong>对话框中，单击并下载 Docker 镜像的 <code>.zip</code> 文件。</p></li></ul> <p>解压缩下载的 <code>.zip</code> 压缩包以获得内部的 tarball（<code>mysql-enterprise-server-**version.tar</code>），然后通过运行以下命令加载镜像：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> load <span class="token parameter variable">-i</span> mysql-enterprise-server-version.tar
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>你可以使用以下命令列出下载的 Docker 镜像：</p> <div class="language-bah line-numbers-mode"><pre class="language-text"><code>$&gt; docker images
REPOSITORY           TAG                 IMAGE ID            CREATED             SIZE
mysql/mysql-server   latest              3157d7f55f8d        4 weeks ago         241MB
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="启动-mysql-服务器实例"><a href="#启动-mysql-服务器实例" class="header-anchor">#</a> 启动 MySQL 服务器实例</h2> <p>要为 MySQL 服务器启动新的 Docker 容器，请使用以下命令：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">--name</span><span class="token operator">=</span>container_name  <span class="token parameter variable">--restart</span> on-failure <span class="token parameter variable">-d</span> image_name:tag
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可以使用 <strong>docker images</strong> 命令获得镜像名称，如<a href="/2/2.5/2.5.6/2.5.6.1/docker-mysql-getting-started.html#下载-MySQL-服务器-Docker-镜像">下载 MySQL 服务器 Docker 镜像</a>中所述。</p> <p><code>--name</code> 选项是可选的，用于为服务器容器提供自定义名称；如果没有提供容器名称，则生成一个随机名称。</p> <p><code>--restart</code> 选项用于配置容器的<a href="/2/2.5/2.5.6/2.5.6.1/docker-mysql-getting-started.html#下载-MySQL-服务器-Docker-镜像">重启策略</a>；应将其设置为故障时的值，以支持客户端会话中的服务器重启（例如，当客户端执行重启语句或<a href="/7/7.4/7.4.2/configuring-production-instances.html">配置 InnoDB 集群实例</a>时）。在启用<a href="/13/13.7/13.7.8/13.7.8.8/restart.html">重启</a>支持的情况下，在客户端会话中发出重启会导致服务器和容器停止，然后重新启动。<em>MySQL 8.0.21 及更高版本支持服务器重启</em>。</p> <p>例如，要为 MySQL 社区版服务器启动一个新的 Docker 容器，请使用以下命令：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">--name</span><span class="token operator">=</span>mysql1 <span class="token parameter variable">--restart</span> on-failure <span class="token parameter variable">-d</span> mysql/mysql-server:8.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>要使用从 OCR 下载的名为 MySQL 企业版服务器的 Docker 镜像来启动新的 Docker 容器，请使用以下命令：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">--name</span><span class="token operator">=</span>mysql1 <span class="token parameter variable">--restart</span> on-failure <span class="token parameter variable">-d</span> container-registry.oracle.com/mysql/enterprise-server:8.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>要使用从我的 Oracle 支持下载的，名为 MySQL 企业版服务器的 Docker 镜像，来启动一个新的 Docker 容器，请使用以下命令：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">--name</span><span class="token operator">=</span>mysql1 <span class="token parameter variable">--restart</span> on-failure <span class="token parameter variable">-d</span> mysql/enterprise-server:8.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果指定名称和标记的 Docker 镜像尚未通过早期的 <strong>docker pull</strong>或 <strong>docker run</strong> 命令下载，则该镜像现在已下载。容器初始化开始，当你运行 <strong>docker ps</strong> 命令时，容器将显示在正在运行的容器列表中。例如：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$<span class="token operator">&gt;</span> <span class="token function">docker</span> <span class="token function">ps</span>
CONTAINER ID   IMAGE                COMMAND                  CREATED             STATUS                              PORTS                NAMES
a24888f0d6f4   mysql/mysql-server   <span class="token string">&quot;/entrypoint.sh my...&quot;</span>   <span class="token number">14</span> seconds ago      Up <span class="token number">13</span> seconds <span class="token punctuation">(</span>health: starting<span class="token punctuation">)</span>    <span class="token number">3306</span>/tcp, <span class="token number">33060</span>/tcp  mysql1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>容器初始化可能需要一些时间。当服务器准备好使用时，docker ps命令输出中容器的状态从（健康：开始）更改为（健康）。
上面 <strong>docker run</strong> 命令中使用的 <code>-d</code> 选项使容器在后台运行。使用此命令监视容器的输出：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> logs mysql1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>初始化完成后，命令的输出将包含为根用户生成的随机密码；例如，使用以下命令检查密码：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$<span class="token operator">&gt;</span> <span class="token function">docker</span> logs mysql1 <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">|</span> <span class="token function">grep</span> GENERATED
GENERATED ROOT PASSWORD: Axegh3kAJyDLaRuBemecis<span class="token operator">&amp;</span>EShOs
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="从容器内连接到-mysql-服务器"><a href="#从容器内连接到-mysql-服务器" class="header-anchor">#</a> 从容器内连接到 MySQL 服务器</h2> <p>一旦服务器准备就绪，就可以在刚刚启动的 <a href="/4/4.5/4.5.1/mysql.html">mysql</a> 服务器容器中运行 mysql 客户端，并将其连接到 MySQL 服务器。使用 <strong>docker exec-it</strong> 命令在已启动的 docker 容器内启动 <a href="/4/4.5/4.5.1/mysql.html">mysql</a> 客户端，如下所示：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> mysql1 mysql <span class="token parameter variable">-uroot</span> <span class="token parameter variable">-p</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>当询问时，输入生成的 root 密码（参阅上面<a href="/2/2.5/2.5.6/2.5.6.1/docker-mysql-getting-started.html#启动-MySQL-服务器实例">启动 MySQL 服务器实例</a>的最后一步，了解如何查找密码）。由于默认情况下 <a href="/2/2.5/2.5.6/2.5.6.2/docker-mysql-more-topics.html#Docker-环境变量">MYSQL_ONETIME_PASSWORD</a> 选项为 true，因此将 <a href="/4/4.5/4.5.1/mysql.html">mysql</a> 客户端连接到服务器后，必须通过发出以下语句重置服务器根密码：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>mysql<span class="token operator">&gt;</span> ALTER <span class="token environment constant">USER</span> <span class="token string">'root'</span>@<span class="token string">'localhost'</span> IDENTIFIED BY <span class="token string">'password'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>用你选择的密码替换 <strong>password</strong>。重置密码后，服务器就可以使用了。</p> <h2 id="容器-shell-访问"><a href="#容器-shell-访问" class="header-anchor">#</a> 容器 Shell 访问</h2> <p>要让 shell 访问 MySQL 务器容器，请使用 <code>docker exec-it</code> 命令在容器内启动 bash shell：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$<span class="token operator">&gt;</span> <span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> mysql1 <span class="token function">bash</span>
bash-4.2<span class="token comment">#</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>然后可以在容器中运行 Linux 命令。例如，要查看容器内服务器数据目录中的内容，请使用以下命令：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>bash-4.2<span class="token comment"># ls /var/lib/mysql</span>
auto.cnf    ca.pem	     client-key.pem  ib_logfile0  ibdata1  mysql       mysql.sock.lock	   private_key.pem  server-cert.pem  sys
ca-key.pem  client-cert.pem  ib_buffer_pool  ib_logfile1  ibtmp1   mysql.sock  performance_schema  public_key.pem   server-key.pem
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="停止和删除-mysql-容器"><a href="#停止和删除-mysql-容器" class="header-anchor">#</a> 停止和删除 MySQL 容器</h2> <p>要停止我们创建的 MySQL 服务器容器，请使用以下命令：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> stop mysql1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>docker stop</strong> 向 <a href="/4/4.3/4.3.1/mysqld.html">mysqld</a> 进程发送一个 SIGTERM 信号，以便服务器正常关闭。</p> <p>还要注意，当容器的主进程（MySQL 服务器容器的情况下为 <a href="/4/4.3/4.3.1/mysqld.html">mysqld</a>）停止时，Docker 容器会自动停止。</p> <p>要再次启动MySQL服务器容器，请执行以下操作：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> start mysql1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>要使用单个命令停止并重新启动MySQL服务器容器，请执行以下操作：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> restart mysql1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>要删除 MySQL 容器，请先停止它，然后使用 <strong>docker rm</strong> 命令：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> stop mysql1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token function">rm</span> mysql1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果希望同时删除服务器数据目录的 Docker 卷，请在 <strong>docker rm</strong> 命令中添加 <code>-v</code> 选项。</p> <h2 id="升级-mysql-服务器容器"><a href="#升级-mysql-服务器容器" class="header-anchor">#</a> 升级 MySQL 服务器容器</h2> <div class="custom-block danger"><p class="custom-block-title">重要</p> <p>在执行任何 MySQL 升级之前，请仔细遵循<a href="/2/2.11/upgrading.html">章节 2.11，“升级 MySQL”</a>中的说明。在这里讨论的其他说明中，在升级之前备份数据库尤其重要。<br> 本节中的说明要求将服务器的数据和配置保存在主机上。有关详细信息，参阅<a href="/2/2.5/2.5.6/2.5.6.2/docker-mysql-more-topics.html#持久化数据和配置更改">持久化数据和配置更改</a>。</p></div> <p>按照以下步骤将 MySQL 5.7 的 Docker 安装升级到 8.0：</p> <ul><li>停止MySQL 5.7服务器（本例中容器名为 <code>mysql57</code>）：</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> stop mysql57
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><p>下载MySQL 8.0服务器Docker镜像。请参阅下载MySQL Server Docker映像中的说明。确保为MySQL 8.0使用正确的标记。</p></li> <li><p>启动一个新的 MySQL 8.0 Docker 容器（在本例中命名为 <code>mysql80</code>），使用主机上保存的旧服务器数据和配置（如果需要进行适当修改，参阅<a href="/2/2.11/upgrading.html">章节 2.11，“升级 MySQL”</a>）（本例中通过<a href="https://docs.docker.com/engine/reference/commandline/service_create/#add-bind-mounts-or-volumes.html" target="_blank" rel="noopener noreferrer">绑定挂载<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）。对于 MySQL 社区版服务器，运行以下命令：</p></li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">--name</span><span class="token operator">=</span>mysql80 <span class="token punctuation">\</span>
   <span class="token parameter variable">--mount</span> <span class="token assign-left variable">type</span><span class="token operator">=</span>bind,src<span class="token operator">=</span>/path-on-host-machine/my.cnf,dst<span class="token operator">=</span>/etc/my.cnf <span class="token punctuation">\</span>
   <span class="token parameter variable">--mount</span> <span class="token assign-left variable">type</span><span class="token operator">=</span>bind,src<span class="token operator">=</span>/path-on-host-machine/datadir,dst<span class="token operator">=</span>/var/lib/mysql <span class="token punctuation">\</span>
   <span class="token parameter variable">-d</span> mysql/mysql-server:8.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>如果需要，将 <code>mysql/mysql-server</code> 调整为正确的镜像名称，例如，将其替换为 <code>container-registry.oracle。com/mysql/enterprise-server</code> 用于从 OCR 下载的 mysql 企业版镜像，或 <code>mysql/enterprise-server</code> 用于从 <a href="https://support.oracle.com/" target="_blank" rel="noopener noreferrer">我的 Oracle 支持<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>下载的 MySQL 企业版镜像。</p> <ul><li>等待服务器完成启动。你可以使用 <strong>docker ps</strong> 命令检查服务器的状态（参阅<a href="/2/2.5/2.5.6/2.5.6.1/docker-mysql-getting-started.html#启动-MySQL-服务器实例">启动 MySQL 服务器实例</a>以了解如何做到这一点）。</li></ul> <p>在 8.0 系列（即从 <code>8.0.x</code> 版升级到 <code>8.0.y</code> 版）中，请遵循相同的步骤：停止原始容器，并在旧服务器数据和配置上使用更新的映像启动新容器。如果你在启动原始容器时使用了 <code>8.0</code> 或 <code>latest</code>，并且现在有一个新的 MySQL 8.0 版本要升级到它，你必须首先使用以下命令为新版本拉取镜像：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> pull mysql/mysql-server:8.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后，你可以通过在旧数据和配置上启动具有相同标记的新容器进行升级（如果你使用的是 MySQL 企业版，请调整仓库名称；参阅下载 <a href="/2/2.5/2.5.6/2.5.6.1/docker-mysql-getting-started.html#下载-MySQL-服务器-Docker-镜像">MySQL 服务器 Docker 镜像</a>）：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">--name</span><span class="token operator">=</span>mysql80new <span class="token punctuation">\</span>
   <span class="token parameter variable">--mount</span> <span class="token assign-left variable">type</span><span class="token operator">=</span>bind,src<span class="token operator">=</span>/path-on-host-machine/my.cnf,dst<span class="token operator">=</span>/etc/my.cnf <span class="token punctuation">\</span>
   <span class="token parameter variable">--mount</span> <span class="token assign-left variable">type</span><span class="token operator">=</span>bind,src<span class="token operator">=</span>/path-on-host-machine/datadir,dst<span class="token operator">=</span>/var/lib/mysql <span class="token punctuation">\</span>
<span class="token parameter variable">-d</span> mysql/mysql-server:8.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">注意</p> <p>对于 MySQL 8.0.15 及更早版本：你需要通过在 MySQL8.0 服务器容器中运行 <a href="/4/4.4/4.4.5/mysql-upgrade.html">mysql_upgrade</a> 实用程序来完成升级过程（对于 MySQL 8.0.16 及更高版本，此步骤<em>非</em>必需）：</p> <ul><li><p>docker exec -it mysql80 mysql_upgrade -uroot -p</p> <p>出现提示时，输入旧服务器的 root 密码。</p></li> <li><p>通过重新启动新容器完成升级：</p> <p>docker restart mysql80</p></li></ul></div> <h2 id="有关使用-docker-部署-mysql-服务器的更多主题"><a href="#有关使用-docker-部署-mysql-服务器的更多主题" class="header-anchor">#</a> 有关使用 Docker 部署 MySQL 服务器的更多主题</h2> <p>有关使用类似 Docker 的服务器配置部署 MySQL 服务器、持久化数据和配置、服务器错误日志和容器环境变量的更多主题，参阅<a href="/2/2.5/2.5.6/2.5.6.2/docker-mysql-more-topics.html">章节 2.5.6.2，“使用 Docker 部署 MySQL 服务器的更多主题”</a>。</p> <blockquote><p><a href="https://dev.mysql.com/doc/refman/8.0/en/docker-mysql-getting-started.html" target="_blank" rel="noopener noreferrer">原文链接<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/2/2.5/2.5.5/linux-installation-debian.html" class="prev">
        使用 Oracle 的 Debian 软件包在 Linux上 安装 MySQL
      </a></span> <span class="next"><a href="/2/2.5/2.5.6/2.5.6.2/docker-mysql-more-topics.html">
        关于使用 Docker 部署 MySQL 服务的更多主题
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.e47f27d9.js" defer></script><script src="/assets/js/2.47a142bd.js" defer></script><script src="/assets/js/14.182f7e04.js" defer></script>
  </body>
</html>
