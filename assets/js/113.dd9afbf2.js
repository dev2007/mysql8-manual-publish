(window.webpackJsonp=window.webpackJsonp||[]).push([[113],{412:function(s,a,t){"use strict";t.r(a);var n=t(13),r=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"_2-7-1-使用-solaris-pkg-在-solaris-上安装-mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-7-1-使用-solaris-pkg-在-solaris-上安装-mysql"}},[s._v("#")]),s._v(" 2.7.1 使用 Solaris PKG 在 Solaris 上安装 MySQL")]),s._v(" "),a("p",[s._v("你可以使用本机 Solaris PKG 格式的二进制包而不是二进制 tarball 发行版在 Solaris 上安装 MySQL。")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),a("p",[s._v("MySQL 5.7 依赖于 Oracle Developer Studio 运行库；但这不适用于 MySQL 8.0。")])]),s._v(" "),a("p",[s._v("要使用此软件包，请下载相应的 "),a("code",[s._v("mysql-VERSION-solaris11-PLATFORM.pkg.gz")]),s._v(" 文件，然后解压缩。例如：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" gunzip mysql-8.0.31-solaris11-x86_64.pkg.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("要安装新软件包，请使用 "),a("strong",[s._v("pkgadd")]),s._v(" 并按照屏幕提示进行操作。你必须具有 root 权限才能执行此操作：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" pkgadd "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" mysql-8.0.31-solaris11-x86_64.pkg\n\nThe following packages are available:\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  mysql     MySQL Community Server "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("GPL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n               "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("i86pc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.0")]),s._v(".31\n\nSelect package"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" you wish to process "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("or "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'all'")]),s._v(" to process\nall packages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(". "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default: all"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("?,??,q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(":\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("PKG安装程序安装所需的所有文件和工具，如果不存在，则初始化数据库。要完成安装，你应该按照安装结束时的说明设置 MySQL 的 root 密码。或者，你可以运行安装附带的 "),a("RouterLink",{attrs:{to:"/4/4.4/4.4.2/mysql-secure-installation.html"}},[s._v("mysql_secure_installation")]),s._v(" 脚本。")],1),s._v(" "),a("p",[s._v("默认情况下，PKG 包将 MySQL 安装在根路径 "),a("code",[s._v("/opt/mysql")]),s._v(" 下。当使用 "),a("strong",[s._v("pkgadd")]),s._v(" 时，你只能更改安装根路径，该路径可用于在不同的 Solaris 区域中安装 MySQL。如果需要在特定目录中安装，请使用二进制 "),a("strong",[s._v("tar")]),s._v(" 文件分发。")]),s._v(" "),a("p",[a("code",[s._v("pkg")]),s._v(" 安装程序将适用于 MySQL 的启动脚本复制到 "),a("code",[s._v("/etc/init.d/mysql")]),s._v(" 中。要使 MySQL 能够自动启动和关闭，你应该在该文件和初始化脚本目录之间创建一个链接。例如，为了确保 MySQL 的安全启动和关闭，可以使用以下命令添加正确的链接：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" /etc/init.d/mysql /etc/rc3.d/S91mysql\n$"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" /etc/init.d/mysql /etc/rc0.d/K02mysql\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("要删除 MySQL，安装的包名为 "),a("code",[s._v("mysql")]),s._v("。你可以将此命令与 "),a("strong",[s._v("pkgrm")]),s._v(" 命令结合使用以删除安装。")]),s._v(" "),a("p",[s._v("要在使用 Solaris 软件包文件格式时进行升级，必须在安装更新的软件包之前删除现有安装。删除包不会删除现有数据库信息，只会删除服务器、二进制文件和支持文件。因此，典型的升级顺序是：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mysqladmin "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),s._v("\n$"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" pkgrm mysql\n$"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" pkgadd "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" mysql-8.0.31-solaris11-x86_64.pkg\n$"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mysqld_safe "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n$"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mysql_upgrade   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# prior to MySQL 8.0.16 only")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("在执行任何升级之前，你应该检查"),a("RouterLink",{attrs:{to:"/2/2.11/upgrading.html"}},[s._v("章节 2.11，“升级 MySQL”")]),s._v("中的注释。")],1),s._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://dev.mysql.com/doc/refman/8.0/en/solaris-installation-pkg.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("原文链接"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=r.exports}}]);