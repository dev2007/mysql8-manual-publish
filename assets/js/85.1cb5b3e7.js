(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{380:function(t,a,s){"use strict";s.r(a);var e=s(13),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"_2-3-4-2-创建选项文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-4-2-创建选项文件"}},[t._v("#")]),t._v(" 2.3.4.2 创建选项文件")]),t._v(" "),a("p",[t._v("如果在运行服务器时需要指定启动选项，可以在命令行中指示它们，也可以将它们放在选项文件中。对于每次服务器启动时使用的选项，你可能会发现使用选项文件指定MySQL配置最为方便。在以下情况下尤其如此：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("安装或数据目录位置不同于默认位置（"),a("code",[t._v("C:\\ProgramFiles\\MySQL\\MySQL Server 8.0")]),t._v(" 和 "),a("code",[t._v("C:\\Program Files\\MySQL\\MySQL Server 8.0\\data")]),t._v("）。")])]),t._v(" "),a("li",[a("p",[t._v("你需要调整服务器设置，例如内存、缓存或InnoDB配置信息。")])])]),t._v(" "),a("p",[t._v("当 MySQL 服务器在 Windows 上启动时，它会在多个位置查找选项文件，例如 Windows 目录、"),a("code",[t._v("C:\\")]),t._v("、MySQL 安装目录（有关位置的完整列表，参阅"),a("RouterLink",{attrs:{to:"/4/4.2/4.2.2/4.2.2.2/option-files.html"}},[t._v("章节 4.2.2.2，“使用选项文件”")]),t._v("）。Windows 目录通常命名为 "),a("code",[t._v("C:\\Windows")]),t._v("。你可以使用以下命令从 "),a("code",[t._v("WINDIR")]),t._v(" 环境变量的值确定其确切位置：")],1),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("C:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" %WINDIR%\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("MySQL 首先在 "),a("code",[t._v("my.ini")]),t._v(" 文件中的每个位置查找选项，然后在 "),a("code",[t._v("my.cnf")]),t._v(" 文件。但是，为了避免混淆，最好只使用一个文件。如果你的电脑使用 "),a("code",[t._v("C:")]),t._v(" 不是引导驱动器的引导加载程序，你唯一的选择是使用 "),a("code",[t._v("my.ini")]),t._v(" 文件。无论使用哪个选项文件，它都必须是纯文本文件。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),a("p",[t._v("当使用 MySQL 安装程序安装 MySQL 服务器时，它会在默认位置创建 "),a("code",[t._v("my.ini")]),t._v("，并且执行 MySQL 安装程序的用户被授予此新 "),a("code",[t._v("my.ini")]),t._v(" 文件完全权限。换句话说，请确保 MySQL 服务器用户具有读取 "),a("code",[t._v("my.ini")]),t._v(" 文件的权限。")])]),t._v(" "),a("p",[t._v("你还可以使用 MySQL 发行版中包含的示例选项文件；参阅"),a("RouterLink",{attrs:{to:"/5/5.1/5.1.2/server-configuration-defaults.html"}},[t._v("章节 5.1.2，“服务器配置默认值”")]),t._v("。")],1),t._v(" "),a("p",[t._v("可以使用任何文本编辑器（如记事本）创建和修改选项文件。例如，如果MySQL安装在E:\\MySQL中，数据目录在E:\\mydata\\data中，则可以创建一个包含 [mysqld] 部分的选项文件，以指定 "),a("code",[t._v("basedir")]),t._v(" 和 "),a("code",[t._v("datadir")]),t._v(" 选项的值：")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("mysqld"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# set basedir to your installation path")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("basedir")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("E:/mysql\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# set datadir to the location of your data directory")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("datadir")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("E:/mydata/data\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[t._v("选项文件值中使用反斜杠的规则参阅"),a("RouterLink",{attrs:{to:"/4/4.2/4.2.2/4.2.2.2/option-files.html"}},[t._v("章节 4.2.2.2，“使用选项文件”")]),t._v("。")],1),t._v(" "),a("p",[t._v("ZIP 存档不包括 "),a("code",[t._v("data")]),t._v(" 目录。要通过创建数据目录并填充 MySQL 系统数据库中的表来初始化 MySQL 安装，请使用 "),a("RouterLink",{attrs:{to:"/5/5.1/5.1.7/server-options.html"}},[a("code",[t._v("--initialize")])]),t._v(" 或 "),a("RouterLink",{attrs:{to:"/5/5.1/5.1.7/server-options.html"}},[a("code",[t._v("--initial unsecure")])]),t._v(" 初始化 MySQL。有关更多信息，请参阅"),a("RouterLink",{attrs:{to:"/2/2.10/2.10.1/data-directory-initialization.html"}},[t._v("章节 2.10.1，“初始化数据目录”")]),t._v("。")],1),t._v(" "),a("p",[t._v("如果要在其他位置使用数据目录，则应将数据目录的全部内容复制到新位置。例如，如果你想使用 "),a("code",[t._v("E:\\mydata")]),t._v(" 作为数据目录，则必须执行两项操作：")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("将整个数据目录及其所有内容从默认位置（例如C:\\Program Files\\MySQL\\MySQL Server 8.0\\data）移动到E:\\mydata。")])]),t._v(" "),a("li",[a("p",[t._v("每次启动服务器时，使用 "),a("code",[t._v("--datadir")]),t._v(" 选项指定新的数据目录位置。")])])]),t._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://dev.mysql.com/doc/refman/8.0/en/windows-create-option-file.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("原文链接"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=n.exports}}]);