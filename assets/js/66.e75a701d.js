(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{358:function(t,_,v){"use strict";v.r(_);var s=v(13),e=Object(s.a)({},(function(){var t=this,_=t._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"_2-11-3-mysql-升级过程升级的内容"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-11-3-mysql-升级过程升级的内容"}},[t._v("#")]),t._v(" 2.11.3 MySQL 升级过程升级的内容")]),t._v(" "),_("p",[t._v("安装新版本的 MySQL 可能需要升级现有安装的以下部分：")]),t._v(" "),_("ul",[_("li",[_("p",[_("code",[t._v("mysql")]),t._v(" 系统模式，其中包含存储 MySQL 服务器运行时所需信息的表（参阅"),_("RouterLink",{attrs:{to:"/5/5.3/system-schema.html"}},[t._v("章节 5.3，“mysql 系统架构”")]),t._v("）。"),_("code",[t._v("mysql")]),t._v(" 模式表分为两大类：")],1),t._v(" "),_("ul",[_("li",[t._v("数据字典表，用于存储数据库对象元数据。")]),t._v(" "),_("li",[t._v("系统表（即剩余的非数据字典表），用于其他操作目的。")])])]),t._v(" "),_("li",[_("p",[t._v("其他模式，其中一些是内置的，可能被认为是服务器“拥有”的，其他模式则不是：")]),t._v(" "),_("ul",[_("li",[t._v("性能模式、"),_("code",[t._v("INFORMATION_SCHEMA")]),t._v("、"),_("a",{attrs:{href:""}},[t._v("ndbinfo")]),t._v(" 和 "),_("code",[t._v("sys")]),t._v(" 模式。")]),t._v(" "),_("li",[t._v("用户模式。")])])])]),t._v(" "),_("p",[t._v("两个不同的版本号与可能需要升级的安装部分相关联：")]),t._v(" "),_("ul",[_("li",[t._v("数据字典版本。这适用于数据字典表。")]),t._v(" "),_("li",[t._v("服务器版本，也称为 MySQL 版本。这适用于其他模式中的系统表和对象。")])]),t._v(" "),_("p",[t._v("在这两种情况下，适用于现有 MySQL 安装的实际版本都存储在数据字典中，当前预期版本被编译为新版本的 MySQL。当实际版本低于当前预期版本时，与该版本关联的安装部分必须升级到当前版本。如果两个版本都表明需要升级，则必须首先进行数据字典升级。")]),t._v(" "),_("p",[t._v("作为上述两个不同版本的反映，升级分为两个步骤：")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("步骤1：数据字典升级。")]),t._v(" "),_("p",[t._v("此步骤升级：")]),t._v(" "),_("ul",[_("li",[_("code",[t._v("mysql")]),t._v(" 模式中的数据字典表。如果实际数据字典版本低于当前预期版本，服务器将使用更新的定义创建数据字典表，将持久化元数据复制到新表，用新表原子替换旧表，并重新初始化数据字典。")]),t._v(" "),_("li",[t._v("性能模式、"),_("code",[t._v("INFORMATION_SCHEMA")]),t._v(" 和 "),_("code",[t._v("ndbinfo")]),t._v("。")])])]),t._v(" "),_("li",[_("p",[t._v("步骤2：服务器升级。")]),t._v(" "),_("p",[t._v("此步骤包括所有其他升级任务。如果现有 MySQL 安装的服务器版本低于新安装的 MySQL 版本，则必须升级所有其他版本：")]),t._v(" "),_("ul",[_("li",[_("code",[t._v("mysql")]),t._v(" 模式中的系统表（其余的非数据字典表）。")]),t._v(" "),_("li",[_("code",[t._v("sys")]),t._v(" 模式。")]),t._v(" "),_("li",[t._v("用户模式。")])])])]),t._v(" "),_("p",[t._v("数据字典升级（步骤1）由服务器负责，服务器在启动时根据需要执行此任务，除非使用阻止它执行此任务的选项进行调用。从 MySQL 8.0.16 开始，选项为 "),_("RouterLink",{attrs:{to:"/5/5.1/5.1.7/server-options.html"}},[t._v("--upgrade=NONE")]),t._v("，从 MySQL 8.0.16 开始，选项是 "),_("RouterLink",{attrs:{to:"/5/5.1/5.1.7/server-options.html"}},[t._v("--no-dd-upgrade")]),t._v("。")],1),t._v(" "),_("p",[t._v("如果数据字典已过期，但服务器无法对其进行升级，则服务器不会运行，而是退出并返回错误。例如：")]),t._v(" "),_("div",{staticClass:"language-bash line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-bash"}},[_("code",[_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("ERROR"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("MY-013381"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Server"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Server shutting down because upgrade is\nrequired, yet prohibited by the "),_("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v(" line option "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v("'--upgrade=NONE'")]),_("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("ERROR"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("MY-010334"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Server"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Failed to initialize DD Storage Engine\n"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("ERROR"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("MY-010020"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Server"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Data Dictionary initialization failed.\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br"),_("span",{staticClass:"line-number"},[t._v("2")]),_("br"),_("span",{staticClass:"line-number"},[t._v("3")]),_("br"),_("span",{staticClass:"line-number"},[t._v("4")]),_("br")])]),_("p",[t._v("MySQL 8.0.16 中对步骤 2 的职责进行了一些更改：")]),t._v(" "),_("ul",[_("li",[t._v("在 MySQL 8.0.16 之前，"),_("RouterLink",{attrs:{to:"/4/4.4/4.4.5/mysql-upgrade.html"}},[t._v("mysql_upgrade")]),t._v(" 升级了性能模式、"),_("code",[t._v("INFORMATION_SCHEMA")]),t._v(" 和步骤 2 中描述的对象。DBA 应该在启动服务器后手动调用 "),_("RouterLink",{attrs:{to:"/4/4.4/4.4.5/mysql-upgrade.html"}},[t._v("mysql_upgrade")]),t._v("。")],1),t._v(" "),_("li",[t._v("从 MySQL 8.0.16 开始，服务器执行以前由 "),_("RouterLink",{attrs:{to:"/4/4.4/4.4.5/mysql-upgrade.html"}},[t._v("mysql_upgrade")]),t._v(" 处理的所有任务。虽然升级仍然是一个两步操作，但服务器同时执行这两个操作，从而简化了过程。")],1)]),t._v(" "),_("p",[t._v("根据要升级到的 MySQL 版本，"),_("RouterLink",{attrs:{to:"/2/2.11/2.11.6/upgrade-binary-package.html#就地升级"}},[t._v("就地升级")]),t._v("和"),_("RouterLink",{attrs:{to:"/2/2.11/2.11.6/upgrade-binary-package.html#逻辑升级"}},[t._v("逻辑升级")]),t._v("中的说明指示服务器是否执行所有升级任务，或者在服务器启动后是否还必须调用 "),_("RouterLink",{attrs:{to:"/4/4.4/4.4.5/mysql-upgrade.html"}},[t._v("mysql_upgrade")]),t._v("。")],1),t._v(" "),_("div",{staticClass:"custom-block tip"},[_("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),_("p",[t._v("由于服务器从 MySQL 8.0.16 开始升级性能模式、"),_("code",[t._v("INFORMATION_SCHEMA")]),t._v(" 和步骤 2 中描述的对象，因此 "),_("RouterLink",{attrs:{to:"/4/4.4/4.4.5/mysql-upgrade.html"}},[t._v("mysql_upgrade")]),t._v(" 是不必要的，并且从该版本起已弃用；预计它将在 MySQL 的未来版本中删除。")],1)]),t._v(" "),_("p",[t._v("在步骤 2 中发生的大多数方面与 MySQL 8.0.16 之前和之后相同，但可能需要不同的命令选项来实现特定效果。")]),t._v(" "),_("p",[t._v("从 MySQL 8.0.16 开始，"),_("RouterLink",{attrs:{to:"/5/5.1/5.1.7/server-options.html"}},[t._v("--upgrade")]),t._v(" 服务器选项控制服务器是否以及如何在启动时执行自动升级：")],1),t._v(" "),_("ul",[_("li",[t._v("如果没有选项或 "),_("RouterLink",{attrs:{to:"/5/5.1/5.1.7/server-options.html"}},[t._v("--upgrade=AUTO")]),t._v("，服务器将升级它确定为过期的任何内容（步骤 1 和 2）。")],1),t._v(" "),_("li",[t._v("如果 "),_("RouterLink",{attrs:{to:"/5/5.1/5.1.7/server-options.html"}},[t._v("--upgrade=NONE")]),t._v("，服务器将不升级任何内容（跳过步骤 1 和 2），但如果必须升级数据字典，服务器也会退出并返回错误。无法使用过期的数据字典运行服务器；服务器坚持升级或退出。")],1),t._v(" "),_("li",[t._v("使用 "),_("RouterLink",{attrs:{to:"/5/5.1/5.1.7/server-options.html"}},[t._v("--upgrade=MINIMAL")]),t._v("，服务器将根据需要升级数据字典、性能模式和 "),_("code",[t._v("INFORMATION_SCHEMA")]),t._v("（步骤 1）。请注意，使用此选项升级后，无法启动组复制，因为复制内部结构所依赖的系统表未更新，而且在其他方面也可能会明显减少功能。")],1),t._v(" "),_("li",[t._v("使用 "),_("RouterLink",{attrs:{to:"/5/5.1/5.1.7/server-options.html"}},[t._v("--upgrade=FORCE")]),t._v("，服务器将根据需要升级数据字典、性能模式和 "),_("code",[t._v("INFORMATION_SCHEMA")]),t._v("（步骤 1），并强制升级所有其他内容（步骤 2）。由于服务器检查所有模式中的所有对象，因此使用此选项，服务器启动需要更长的时间。")],1)]),t._v(" "),_("p",[t._v("如果服务器认为不需要执行步骤 2 操作，则 "),_("code",[t._v("FORCE")]),t._v(" 可用于强制执行这些操作。"),_("code",[t._v("FORCE")]),t._v(" 与 "),_("code",[t._v("AUTO")]),t._v(" 的一个不同之处在于，使用 "),_("code",[t._v("FORCE")]),t._v("，如果缺少帮助表或时区表，服务器会重新创建系统表。")]),t._v(" "),_("p",[t._v("下表显示了 MySQL 8.0.16 之前的升级命令以及 MySQL 8.0.16 及更高版本的等效命令：")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("执行正常升级（必要时执行步骤 1 和 2）：")]),t._v(" "),_("ul",[_("li",[t._v("MySQL 8.0.16 之前的版本："),_("RouterLink",{attrs:{to:"/4/4.3/4.3.1/mysqld.html"}},[t._v("mysqld")]),t._v(" 之后是 "),_("RouterLink",{attrs:{to:"/4/4.4/4.4.5/mysql-upgrade.html"}},[t._v("mysql_upgrade")])],1),t._v(" "),_("li",[t._v("截至 MySQL 8.0.16："),_("RouterLink",{attrs:{to:"/4/4.3/4.3.1/mysqld.html"}},[t._v("mysqld")])],1)])]),t._v(" "),_("li",[_("p",[t._v("必要时只执行步骤 1：")]),t._v(" "),_("ul",[_("li",[t._v("MySQL 8.0.16 之前的版本：不可能执行步骤1中描述的所有升级任务，同时排除步骤 2 中描述的任务。但是，可以避免使用 "),_("RouterLink",{attrs:{to:"/4/4.3/4.3.1/mysqld.html"}},[t._v("mysqld")]),t._v("，然后使用 "),_("RouterLink",{attrs:{to:"/4/4.4/4.4.5/mysql-upgrade.html"}},[t._v("--upgrade-system-tables")]),t._v(" 和 "),_("RouterLink",{attrs:{to:"/4/4.4/4.4.5/mysql-upgrade.html"}},[t._v("--skip-sys-schema")]),t._v(" 选项升级 "),_("RouterLink",{attrs:{to:"/4/4.4/4.4.5/mysql-upgrade.html"}},[t._v("mysql_upgrade")]),t._v(" 来升级用户模式和 "),_("code",[t._v("sys")]),t._v(" 模式。")],1),t._v(" "),_("li",[t._v("截至 MySQL 8.0.16："),_("RouterLink",{attrs:{to:"/4/4.3/4.3.1/mysqld.html"}},[t._v("mysqld --upgrade=MINIMAL")])],1)])]),t._v(" "),_("li",[_("p",[t._v("必要时执行步骤1，强制执行步骤2：")]),t._v(" "),_("ul",[_("li",[t._v("MySQL 8.0.16 "),_("RouterLink",{attrs:{to:"/4/4.3/4.3.1/mysqld.html"}},[t._v("mysqld")]),t._v(" 后跟 "),_("RouterLink",{attrs:{to:"/4/4.4/4.4.5/mysql-upgrade.html"}},[t._v("mysql_upgrade --force")])],1),t._v(" "),_("li",[t._v("截至MySQL 8.0.16："),_("RouterLink",{attrs:{to:"/4/4.3/4.3.1/mysqld.html"}},[t._v("mysqld --upgrade=FORCE")])],1)])])]),t._v(" "),_("p",[t._v("在 MySQL 8.0.16 之前，某些 "),_("RouterLink",{attrs:{to:"/4/4.4/4.4.5/mysql-upgrade.html"}},[t._v("mysql_upgrade")]),t._v(" 选项会影响它执行的操作。下表显示了从 MySQL 8.0.16 开始要使用哪些服务器升级选项值来实现类似的效果。（这些不一定是完全等价的，因为给定的 "),_("code",[t._v("--upgrade")]),t._v(" 选项值可能会产生额外的影响。）")],1),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("mysql_upgrade 选项")]),t._v(" "),_("th",[t._v("服务器选项")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("RouterLink",{attrs:{to:"/4/4.4/4.4.5/mysql-upgrade.html"}},[t._v("--skip-sys-schema")])],1),t._v(" "),_("td",[_("RouterLink",{attrs:{to:"/5/5.1/5.1.7/server-options.html"}},[t._v("--upgrade=NONE")]),t._v(" 或 "),_("RouterLink",{attrs:{to:"/5/5.1/5.1.7/server-options.html"}},[t._v("--upgrade=MINIMAL")])],1)]),t._v(" "),_("tr",[_("td",[_("RouterLink",{attrs:{to:"/4/4.4/4.4.5/mysql-upgrade.html"}},[t._v("--upgrade-system-tables")])],1),t._v(" "),_("td",[_("RouterLink",{attrs:{to:"/5/5.1/5.1.7/server-options.html"}},[t._v("--upgrade=NONE")]),t._v(" 或 "),_("RouterLink",{attrs:{to:"/5/5.1/5.1.7/server-options.html"}},[t._v("--upgrade=MINIMAL")])],1)]),t._v(" "),_("tr",[_("td",[_("RouterLink",{attrs:{to:"/4/4.4/4.4.5/mysql-upgrade.html"}},[t._v("--force")])],1),t._v(" "),_("td",[_("RouterLink",{attrs:{to:"/5/5.1/5.1.7/server-options.html"}},[t._v("--upgrade=FORCE")])],1)])])]),t._v(" "),_("p",[t._v("有关升级步骤2期间发生的情况的其他说明：")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("步骤 2 安装 "),_("code",[t._v("sys")]),t._v(" 模式（如果未安装），否则将其升级到当前版本。如果 "),_("code",[t._v("sys")]),t._v(" 模式存在但没有 "),_("code",[t._v("version")]),t._v(" 视图，则会发生错误，假设其不存在表示用户创建的模式：")]),t._v(" "),_("div",{staticClass:"language-bash line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-bash"}},[_("code",[t._v("A sys schema exists with no sys.version view. If\nyou have a user created sys schema, this must be renamed "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" the\nupgrade to succeed.\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br"),_("span",{staticClass:"line-number"},[t._v("2")]),_("br"),_("span",{staticClass:"line-number"},[t._v("3")]),_("br")])]),_("p",[t._v("要在这种情况下升级，请先删除或重命名现有的sys架构。然后再次执行升级过程。（可能需要强制执行步骤 2。）")]),t._v(" "),_("p",[t._v("要防止 "),_("code",[t._v("sys")]),t._v(" 模式检查，请执行以下操作：")]),t._v(" "),_("ul",[_("li",[t._v("从 MySQL 8.0.16 开始：使用 "),_("code",[t._v("--upgrade=NONE")]),t._v("或 "),_("code",[t._v("--upgrad=MINIMAL")]),t._v(" 选项启动服务器。")]),t._v(" "),_("li",[t._v("MySQL 8.0.16 之前的版本：使用 "),_("RouterLink",{attrs:{to:"/4/4.4/4.4.5/mysql-upgrade.html"}},[t._v("--skip-sysschema")]),t._v(" 选项调用 "),_("RouterLink",{attrs:{to:"/4/4.4/4.4.5/mysql-upgrade.html"}},[t._v("mysql_upgrade")]),t._v("。")],1)])]),t._v(" "),_("li",[_("p",[t._v("步骤 2 升级系统表以确保它们具有当前结构。无论服务器还是 "),_("RouterLink",{attrs:{to:"/4/4.4/4.4.5/mysql-upgrade.html"}},[t._v("mysql_upgrade")]),t._v(" 执行该步骤，都是如此。关于帮助表和时区表的内容，"),_("RouterLink",{attrs:{to:"/4/4.4/4.4.5/mysql-upgrade.html"}},[t._v("mysql_upgrade")]),t._v(" 不加载任何一种类型的表，而服务器加载帮助表，但不加载时区表。（即，在 MySQL 8.0.16 之前，服务器仅在数据目录初始化时加载帮助表。从 MySQL 8.0.16 开始，它在初始化和升级时加载帮助表。）加载时区表的过程依赖于平台，需要 DBA 做出决定，因此无法自动完成。")],1)]),t._v(" "),_("li",[_("p",[t._v("从 MySQL 8.0.30 开始，当步骤 2 升级 "),_("code",[t._v("mysql")]),t._v(" 模式中的系统表时，"),_("code",[t._v("mysql.db")]),t._v("、"),_("code",[t._v("mysql.tables_priv")]),t._v("、"),_("code",[t._v("mysql.columns_priv")]),t._v(" 和 "),_("code",[t._v("mysql.procs_priv")]),t._v(" 表的主键中的列顺序将更改为将主机名和用户名列放在一起。将主机名和用户名放在一起意味着可以使用索引查找，这提高了 "),_("RouterLink",{attrs:{to:"/13/13.7/13.7.1/13.7.1.3/create-user.html"}},[t._v("CREATE USER")]),t._v("、 "),_("RouterLink",{attrs:{to:"/13/13.7/13.7.1/13.7.1.5/drop-user.html"}},[t._v("DROP USER")]),t._v(" 和 "),_("RouterLink",{attrs:{to:"/13/13.7/13.7.1/13.7.1.7/rename-user.html"}},[t._v("RENAME USER")]),t._v(" 语句的性能，也提高了具有多个权限的多个用户的 ACL 检查的性能。删除和重新创建索引是必要的，如果系统拥有大量用户和权限，可能需要一些时间。")],1)]),t._v(" "),_("li",[_("p",[t._v("步骤 2 根据需要处理所有用户模式中的所有表。表检查可能需要很长时间才能完成。每个表都被锁定，因此在处理过程中其他会话无法使用。检查和修复操作可能很耗时，尤其是对于大型表。表检查使用 "),_("RouterLink",{attrs:{to:"/13/13.7/13.7.3/13.7.3.2/check-table.html"}},[t._v("CHECK TABLE")]),t._v(" 语句的 "),_("code",[t._v("FOR UPGRADE")]),t._v(" 选项。有关此选项的详细信息，参阅"),_("RouterLink",{attrs:{to:"/13/13.7/13.7.3/13.7.3.2/check-table.html"}},[t._v("章节 13.7.3.2，“检查表声明”")]),t._v("。")],1),t._v(" "),_("p",[t._v("要防止检查表，请执行以下操作：")]),t._v(" "),_("ul",[_("li",[t._v("从 MySQL 8.0.16 开始：使用 "),_("code",[t._v("--upgrade=NONE")]),t._v(" 或 "),_("code",[t._v("--upgrad=MINIMAL")]),t._v(" 选项启动服务器。")]),t._v(" "),_("li",[t._v("MySQL 8.0.16 之前的版本：使用 "),_("RouterLink",{attrs:{to:"/4/4.4/4.4.5/mysql-upgrade.html"}},[t._v("--upgrade-system-tables")]),t._v(" 选项调用 "),_("RouterLink",{attrs:{to:"/4/4.4/4.4.5/mysql-upgrade.html"}},[t._v("mysql_upgrade")]),t._v("。")],1)]),t._v(" "),_("p",[t._v("要强制检查表格，请执行以下操作：")]),t._v(" "),_("ul",[_("li",[t._v("从MySQL 8.0.16 开始：使用 "),_("code",[t._v("--upgrade=FORCE")]),t._v(" 选项启动服务器。")]),t._v(" "),_("li",[t._v("MySQL 8.0.16 之前的版本：使用 "),_("RouterLink",{attrs:{to:"/4/4.4/4.4.5/mysql-upgrade.html"}},[t._v("--force")]),t._v(" 选项调用 "),_("RouterLink",{attrs:{to:"/4/4.4/4.4.5/mysql-upgrade.html"}},[t._v("mysql_upgrade")]),t._v("。")],1)])]),t._v(" "),_("li",[_("p",[t._v("步骤 2 将 MySQL 版本号保存在数据目录中名为MySQL_upgrade_info的文件中。")]),t._v(" "),_("p",[t._v("要忽略 "),_("code",[t._v("mysql_upgrade_info")]),t._v(" 文件并执行检查，请执行以下操作：")]),t._v(" "),_("ul",[_("li",[t._v("从 MySQL 8.0.16 开始：使用 "),_("code",[t._v("--upgrade=FORCE")]),t._v(" 选项启动服务器。")]),t._v(" "),_("li",[t._v("MySQL 8.0.16 之前的版本："),_("RouterLink",{attrs:{to:"/4/4.4/4.4.5/mysql-upgrade.html"}},[t._v("--force")]),t._v(" 选项调用 "),_("RouterLink",{attrs:{to:"/4/4.4/4.4.5/mysql-upgrade.html"}},[t._v("mysql_upgrade")]),t._v("。")],1)])])]),t._v(" "),_("div",{staticClass:"custom-block tip"},[_("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),_("p",[_("code",[t._v("mysql_upgrade_info")]),t._v(" 文件已弃用；预计它将在 MySQL 的未来版本中删除。")])]),t._v(" "),_("ul",[_("li",[t._v("步骤 2 使用当前 MySQL 版本号标记所有检查和修复的表。这可以确保下次在服务器的同一版本上进行升级检查时，可以确定是否需要再次检查或修复给定的表。")])]),t._v(" "),_("blockquote",[_("p",[_("a",{attrs:{href:"https://dev.mysql.com/doc/refman/8.0/en/upgrading-what-is-upgraded.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("原文链接"),_("OutboundLink")],1)])])])}),[],!1,null,null,null);_.default=e.exports}}]);