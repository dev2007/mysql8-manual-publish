(window.webpackJsonp=window.webpackJsonp||[]).push([[122],{421:function(s,a,e){"use strict";e.r(a);var t=e(13),r=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"_2-9-6-配置-ssl-库支持"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-9-6-配置-ssl-库支持"}},[s._v("#")]),s._v(" 2.9.6 配置 SSL 库支持")]),s._v(" "),a("p",[s._v("需要 SSL 库来支持加密连接、生成随机数的熵以及其他加密相关操作。")]),s._v(" "),a("p",[s._v("如果你从源分发编译 MySQL，"),a("strong",[s._v("CMake")]),s._v(" 会将分发配置为默认使用已安装的 OpenSSL 库。")]),s._v(" "),a("p",[s._v("要使用 OpenSSL 进行编译，请使用以下流程：")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("确保系统上安装了 OpenSSL 1.0.1 或更高版本。如果安装的 OpenSSL 版本低于 1.0.1，"),a("strong",[s._v("CMake")]),s._v(" 会在 MySQL 配置时产生错误。如果需要获得 OpenSSL，请访问 "),a("a",{attrs:{href:"http://www.openssl.org",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://www.openssl.org"),a("OutboundLink")],1),s._v("。")])]),s._v(" "),a("li",[a("p",[a("RouterLink",{attrs:{to:"/2/2.9/2.9.7/source-configuration-options.html#特性选项"}},[s._v("WITH_SSL")]),s._v(" "),a("strong",[s._v("CMake")]),s._v(" 选项确定用于编译 MySQL 的 SSL 库（参阅"),a("RouterLink",{attrs:{to:"/2/2.9/2.9.7/source-configuration-options.html#特性选项"}},[s._v("章节 2.9.7，“MySQL 源配置选项”")]),s._v("）。默认值为 "),a("RouterLink",{attrs:{to:"/2/2.9/2.9.7/source-configuration-options.html#"}},[s._v("-DWITH_SSL=system")]),s._v("，它使用 OpenSSL。要使其显式使用，请在 "),a("strong",[s._v("CMake")]),s._v(" 命令行上指定该选项。例如：")],1)])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("cmake "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DWITH_SSL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("system\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("该命令将分发配置为使用已安装的 OpenSSL 库。或者，要显式指定 OpenSSL 安装的路径名，请使用以下语法。如果你安装了多个版本的 OpenSSL，这将非常有用，以防止 CMake 选择错误的版本：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("cmake "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DWITH_SSL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("path_name\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("从 v8.0.30 起，通过在 EL7 上使用 "),a("code",[s._v("WITH_SSL=openssl11")]),s._v(" 或在 EL8 上使用 "),a("code",[s._v("WITH_2SSL=openssl3")]),s._v("，支持其他 OpenSSL 系统包。认证插件（如 LDAP 和 Kerberos）被禁用，因为它们不支持这些 OpenSSL 的替代版本。")]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[s._v("编译并安装分发。")])]),s._v(" "),a("p",[s._v("要检查 "),a("RouterLink",{attrs:{to:"/4/4.3/4.3.1/mysqld.html"}},[s._v("mysqld")]),s._v(" 服务器是否支持加密连接，请检查 "),a("RouterLink",{attrs:{to:"/5/5.1/5.1.8/server-system-variables.html"}},[s._v("have_ssl")]),s._v(" 系统变量的值：")],1),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SHOW VARIABLES LIKE "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'have_ssl'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n+---------------+-------+\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Variable_name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Value "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+---------------+-------+\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" have_ssl      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" YES   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+---------------+-------+\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("如果值为 "),a("code",[s._v("YES")]),s._v("，则服务器支持加密连接。如果该值为 "),a("code",[s._v("DISABLED")]),s._v("，则服务器能够支持加密连接，但未使用合适的 "),a("code",[s._v("--ssl-xxx")]),s._v(" 选项启动以启用加密连接；参阅"),a("a",{attrs:{href:"/6/6.3/6.3.1/using-encrypted-connections"}},[s._v("章节 6.3.1，“配置 MySQL 以使用加密连接”")]),s._v("。")]),s._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://dev.mysql.com/doc/refman/8.0/en/source-ssl-library-configuration.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("原文链接"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=r.exports}}]);